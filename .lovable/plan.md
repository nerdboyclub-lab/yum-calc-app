

## Исправление автоматической нумерации заказов

### Проблема
Функция `next_order_number()` неправильно определяет текущую дату в часовом поясе Ташкента. Из-за этого она не находит сегодняшние заказы и всегда возвращает `1`, что приводит к дублированию номеров и непреднамеренному объединению заказов.

**Корень проблемы**: `CURRENT_DATE AT TIME ZONE 'Asia/Tashkent'` работает некорректно — сначала берет дату в UTC, а потом конвертирует. Нужно использовать `(now() AT TIME ZONE 'Asia/Tashkent')::date`.

### Решение

**1. Исправить функцию `next_order_number()` в базе данных (миграция)**

Заменить:
```sql
today_date date := (CURRENT_DATE AT TIME ZONE 'Asia/Tashkent');
```
На:
```sql
today_date date := (now() AT TIME ZONE 'Asia/Tashkent')::date;
```

**2. Исправить аналогичную проблему в edge-функции `send-telegram-order`**

Расчет `todayStart` и `todayEnd` в edge-функции тоже может давать неправильные границы. Нужно убедиться, что дата вычисляется правильно с учётом часового пояса Ташкента.

### Технические детали

- Одна миграция для обновления функции `next_order_number()`
- Небольшая правка в `supabase/functions/send-telegram-order/index.ts` для корректного определения границ дня
- Никаких изменений в UI не требуется

